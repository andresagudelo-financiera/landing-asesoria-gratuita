---
/**
 * Value Props Section
 * "Lo que sucede en las Asesorías"
 */

const ctaUrl = "https://viewer.leapchat.digital/mv-asesoria-gratuita";

const steps = [
    {
        title: "Planeación Presupuestal",
        desc: "Organiza tus ingresos y gastos para maximizar tu flujo de caja.",
    },
    {
        title: "Gestión de Endeudamiento",
        desc: "Estrategias efectivas para reducir y eliminar tus deudas.",
    },
    {
        title: "Planeación Tributaria",
        desc: "Optimiza tu carga fiscal legalmente (Depende de tu país).",
    },
    {
        title: "Situación Patrimonial",
        desc: "Análisis profundo de tus activos y pasivos actuales.",
    },
    {
        title: "Gestión Patrimonial y Sucesoral",
        desc: "Protege y transfiere tu legado de manera eficiente.",
    },
    {
        title: "Planificación para el Retiro",
        desc: "Construye el fondo necesario para tu libertad futura.",
    },
    {
        title: "Diseño de Planes de Inversión",
        desc: "Portafolios personalizados según tu perfil de riesgo.",
    },
    {
        title: "Protección Personal, Familiar y Patrimonial",
        desc: "Seguros y blindaje financiero para tu tranquilidad.",
    },
    {
        title: "Metas de Corto, Mediano y Largo Plazo",
        desc: "Planificación estratégica para cada etapa de tu vida.",
    },
    {
        title: "Evaluación de Oportunidades de Inversión",
        desc: "Análisis crítico de nuevos negocios y vehículos financieros.",
    },
];
---

<section class="py-20 bg-claudia-secondary relative overflow-hidden">
    <!-- Decorative Elements -->
    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-claudia"></div>

    <div class="container-rebellion relative z-10 text-center">
        <div class="max-w-3xl mx-auto space-y-12">
            <!-- Icon/Badge -->
            <div
                class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-claudia-destacado/10 mb-6 border border-claudia-accent-orange/30 shadow-[0_0_30px_rgba(255,152,0,0.2)]"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-8 h-8 text-claudia-accent-orange"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    ></path>
                </svg>
            </div>

            <h2 class="text-3xl md:text-4xl font-bold text-claudia-text-light">
                Tu Hoja de Ruta <span class="text-claudia-accent-orange"
                    >Financiera</span
                >
            </h2>

            <!-- Roadmap / Timeline Container -->
            <div class="relative py-10 mb-20 px-4 md:px-0">
                <!-- Vertical Line -->
                <div
                    class="absolute left-8 md:left-1/2 top-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-claudia-accent-orange/50 to-transparent transform md:-translate-x-1/2 rounded-full"
                >
                </div>

                <div class="space-y-16 md:space-y-0">
                    {
                        steps.map((step, index) => (
                            <div
                                class={`timeline-item relative flex flex-col md:flex-row items-center justify-between group opacity-0 translate-y-8 ${
                                    index % 2 === 0 ? "" : "md:flex-row-reverse"
                                }`}
                            >
                                {/* Card Area */}
                                <div class="w-full md:w-[45%] pl-16 md:pl-0 mb-8 md:mb-0">
                                    <div
                                        class={`
                                        relative p-8 rounded-3xl overflow-hidden
                                        bg-gradient-to-br from-claudia-accent-orange/20 via-black/80 to-claudia-accent-orange/10
                                        backdrop-blur-md
                                        border-t border-l border-white/10 border-b border-r border-black/40
                                        shadow-[0_10px_40px_-10px_rgba(0,0,0,0.5)]
                                        hover:shadow-[0_20px_50px_-10px_rgba(198,255,0,0.1)]
                                        hover:border-claudia-accent-orange/30
                                        transition-all duration-500 ease-out
                                        group-hover:-translate-y-2
                                        ${
                                            index % 2 === 0
                                                ? "md:mr-auto md:text-right"
                                                : "md:ml-auto md:text-left"
                                        }
                                        text-left
                                    `}
                                    >
                                        {/* Noise Texture / Gradient */}
                                        <div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none" />

                                        {/* Large Number Watermark */}
                                        <div
                                            class={`absolute -bottom-6 -right-6 text-[10rem] font-black text-white/[0.03] select-none leading-none z-0 transition-transform duration-700 group-hover:scale-110 group-hover:text-claudia-accent-orange/[0.05] ${
                                                index % 2 === 0
                                                    ? "md:right-auto md:-left-6"
                                                    : ""
                                            }`}
                                        >
                                            {(index + 1)
                                                .toString()
                                                .padStart(2, "0")}
                                        </div>

                                        {/* Content */}
                                        <div class="relative z-10">
                                            <h3 class="text-white font-bold text-xl md:text-2xl mb-3 tracking-tight drop-shadow-md">
                                                {step.title}
                                            </h3>
                                            <p class="text-gray-300 text-base leading-relaxed font-light">
                                                {step.desc}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                {/* Center Marker (Desktop & Mobile) */}
                                <div class="absolute left-8 md:left-1/2 transform -translate-x-1/2 flex items-center justify-center">
                                    <div class="w-4 h-4 rounded-full bg-claudia-accent-orange shadow-[0_0_15px_rgba(255,152,0,0.8)] z-10 relative">
                                        <div class="absolute inset-0 rounded-full bg-claudia-accent-orange animate-ping opacity-20" />
                                    </div>
                                    <div class="w-12 h-12 absolute bg-claudia-dark/50 backdrop-blur-sm rounded-full border border-white/10" />
                                </div>

                                {/* Empty Space for formatting */}
                                <div class="hidden md:block md:w-[45%]" />
                            </div>
                        ))
                    }
                </div>
            </div>

            <div
                class="relative p-10 md:p-14 rounded-3xl overflow-hidden group text-center border border-claudia-accent-orange/40 shadow-[0_0_60px_rgba(255,152,0,0.15)] bg-gradient-to-br from-claudia-secondary/90 to-black/80 backdrop-blur-xl"
            >
                <div
                    class="absolute inset-0 bg-gradient-to-r from-transparent via-claudia-accent-orange/10 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-in-out pointer-events-none"
                >
                </div>

                <div class="relative z-10 space-y-8 flex flex-col items-center">
                    <p
                        class="text-xl md:text-2xl text-gray-300 font-light leading-relaxed max-w-4xl mx-auto"
                    >
                        Una consultoría estratégica de este nivel tiene un valor
                        de <span class="text-white font-bold text-3xl"
                            >$100 USD</span
                        >, pero hoy quiero invitarte a dar el primer paso sin
                        costo.
                        <br class="hidden md:block" />
                        Si estás listo para comprometerte con tu futuro financiero,
                        <span class="text-claudia-accent-orange font-bold"
                            >postúlate ahora</span
                        > para una sesión de diagnóstico gratuita.
                    </p>

                    <!-- CTA Button -->
                    <div class="pt-4">
                        <a
                            href={ctaUrl}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="inline-flex items-center gap-3 px-12 py-5 bg-claudia-accent-orange hover:bg-orange-500 text-white text-xl font-bold uppercase tracking-wider rounded-full shadow-[0_0_30px_rgba(255,152,0,0.4)] hover:shadow-[0_0_50px_rgba(255,152,0,0.6)] transition-all duration-300 hover:-translate-y-1 animate-pulse-slow"
                        >
                            <span>AGENDAR SESIÓN</span>
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-6 w-6"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                            </svg>
                        </a>
                        <p
                            class="mt-4 text-xs text-white/30 uppercase tracking-widest"
                        >
                            Cupos limitados por mes
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    const items = document.querySelectorAll(".timeline-item");

    items.forEach((item, index) => {
        gsap.to(item, {
            scrollTrigger: {
                trigger: item,
                start: "top 85%",
                toggleActions: "play none none reverse",
            },
            y: 0,
            opacity: 1,
            duration: 0.8,
            ease: "power3.out",
            delay: index % 2 === 0 ? 0 : 0.2, // Slight delay for staggering if needed
        });
    });
</script>
